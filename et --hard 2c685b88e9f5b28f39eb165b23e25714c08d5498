[33mcommit 2c685b88e9f5b28f39eb165b23e25714c08d5498[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m)[m
Author: Pipritru <cdds0413@gmail>
Date:   Mon Oct 20 18:52:36 2025 -0500

    feat: soporte de √≥rdenes con items, sistema de lealtad y documentaci√≥n
    
    Se actualiza OrderController::store para aceptar y crear items en la misma petici√≥n (validaci√≥n, suma de subtotales y transacci√≥n DB).
    Se a√±ade soporte en products para points (puntos otorgados) y points_cost (coste de canje); migraciones asociadas incluidas.
    Implementa dominio de lealtad:
    LoyaltyService para c√°lculo y acreditaci√≥n de puntos (idempotente: evita cr√©ditos duplicados por order_id).
    OrderObserver que dispara la acreditaci√≥n cuando una orden pasa a completed.
    Tablas loyalty_points y transaction_points para saldo e historial.
    Endpoints nuevos / actualizados:
    GET /api/users/{id}/points ‚Äî consulta saldo y transacciones (propietario o admin).
    POST /api/users/{id}/points/adjust ‚Äî ajuste manual por admin (registro de motivo y auditor√≠a).
    POST /api/redeem ‚Äî canje de productos por puntos (verifica saldo y registra transacci√≥n).
    POST /api/orders ‚Äî ahora acepta items en el body.
    Auditor√≠a:
    transaction_points incluye created_by para registrar qui√©n realiz√≥ ajustes/redeems.
    Seguridad:
    Mejora de CheckRole para coincidencia robusta (m√∫ltiples roles, alias, IDs).
    OpenAPI / Swagger:
    Anotaciones actualizadas para reflejar campos nuevos (items, points, points_cost, created_by) y regeneraci√≥n de documentaci√≥n.
    Notas:
    Pendiente implementar PersonPolicy / OrderPolicy y a√±adir tests de integraci√≥n (acumulaci√≥n de puntos, bonus primera compra, canje y ajustes).
    Verificar en Swagger UI los ejemplos POST y regenerar documentaci√≥n con php artisan l5-swagger:generate si es necesario.
